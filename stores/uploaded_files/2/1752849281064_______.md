# 文件存储技术

## 1. 对象存储（Object Storage）

### 定义：

对象存储是一种**非层级结构的扁平化存储方式**，每个文件被看作一个独立的“对象”，带有唯一的 key + 元数据 + 内容。

### 示例：

- Amazon S3（最知名）
- 阿里云 OSS
- 腾讯云 COS
- MinIO（开源）
- 七牛云存储

### 特点：

| 特性           | 描述                                       |
| -------------- | ------------------------------------------ |
| 基于 HTTP 协议 | 上传/下载/删除文件用 API 请求              |
| 面向对象       | 不关心路径/目录结构，本质是 key-value 存储 |
| 高可扩展性     | 易扩展到 PB 级别                           |
| 元数据支持丰富 | 每个对象可以带自定义信息（如类型/权限）    |
| 低成本存冷数据 | 适合大规模图片、音视频、归档数据等         |



### 适合场景：

- 云端大规模文件（图片、音频、视频、日志等）
- 前后端通过 URL 上传/下载
- CDN 加速访问

------

## 2. 分布式文件系统（DFS）

### 定义：

分布式文件系统是**跨多台服务器**将文件数据分片存储，并对用户提供**类似本地文件系统的接口**，隐藏底层复杂性。

### 示例：

- HDFS（Hadoop Distributed File System）
- CephFS（Ceph 的分布式文件系统）
- GlusterFS、MooseFS、JuiceFS、SeaweedFS 等

### 特点：

| 特性               | 描述                                     |
| ------------------ | ---------------------------------------- |
| 面向块（Block）    | 文件被切分为多个数据块，分布在不同机器上 |
| 支持副本           | 每个块通常有多副本，提高容错能力         |
| 高吞吐             | 适合大数据场景                           |
| 与本地文件系统一致 | 支持 POSIX 接口，程序无需特殊修改        |
| 可挂载为目录       | 如 `/mnt/cephfs/data`                    |



### 适合场景：

- 分布式大数据分析（MapReduce、Spark）
- AI / 训练数据集
- 文件大量读写、强一致需求
- 需要和操作系统深度集成

------

## 3. 网络文件系统（NFS）

### 定义：

NFS 是一种**通过网络将远程服务器上的文件系统挂载到本地**的方式，使其表现得就像本地磁盘。

### 示例：

- NFSv3 / NFSv4（Linux 主流）
- SMB（Windows 文件共享）

### 特点：

| 特性             | 描述                         |
| ---------------- | ---------------------------- |
| 文件级共享       | 多台机器通过网络访问同一目录 |
| 简单易用         | 配置简单，不需要特别客户端   |
| 但性能一般       | 单点瓶颈、并发能力有限       |
| 无副本机制       | 若服务挂掉，数据无法访问     |
| 不是真正“分布式” | 是远程共享，不具备高可用特性 |



### 适合场景：

- 小规模内部服务之间共享文件
- 简单的多机器部署场景
- 临时开发/测试挂载目录

------

## 三者核心区别一览：

| 对比项       | 对象存储          | 分布式文件系统   | 网络文件系统   |
| ------------ | ----------------- | ---------------- | -------------- |
| 协议         | HTTP API          | 文件/块级接口    | NFS/SMB 等     |
| 结构         | 扁平 key-value    | 类似本地目录结构 | 本地目录结构   |
| 多副本       | 支持              | 支持             | ❌（通常无）    |
| 高可用性     | ✅ 高              | ✅ 高             | ❌ 低           |
| 容错恢复     | ✅ 自动            | ✅ 自动           | ❌ 无           |
| 性能扩展     | 极强（横向）      | 强               | 弱             |
| 文件寻址方式 | 通过 key          | 文件路径         | 文件路径       |
| 常见使用场景 | 云存储 / 静态资源 | 大数据 / AI      | 开发测试共享盘 |



------

## 举例说明：

| 场景                   | 推荐方案                    |
| ---------------------- | --------------------------- |
| 上传头像/视频到云端    | ✅ 对象存储（如 S3、MinIO）  |
| 大数据计算平台存储     | ✅ 分布式文件系统（如 HDFS） |
| 两台服务器共享日志目录 | ✅ NFS                       |



------

## 总结一句话：

> 🌩 **对象存储是云服务首选，DFS是高性能多节点方案，NFS是老牌简易共享方案。**